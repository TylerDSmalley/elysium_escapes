{% extends "base.html.twig" %}
{% block title %}Contact Us
{% endblock %}
{% block head %}
	<link rel="stylesheet" href="styles/contact.css">
	<link rel="stylesheet" href="https://fonts.google.com/specimen/Source+Sans+Pro?category=Sans+Serif">
	<link rel="stylesheet" href="https://fonts.google.com/specimen/Roboto?category=Sans+Serif#standard-styles">
	<script src="scripts/nav.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	{{ parent() }}
{% endblock %}

{% block content %}

	<div class="parallax-1"></div>

	<section id="destination_container">
		<h2 id="h2_Destinations">Contact Us</h2>
		<ul id="destination_list_wrapper">
			<li class="destinaton_flexbox">
				<iframe id="map" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d831.4288313210799!2d-73.57475810682598!3d45.49835963789182!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4cc91a421f732e1f%3A0x99c5ec658d273acc!2s1234%20Rue%20Sainte-Catherine%20O%2C%20Montr%C3%A9al%2C%20QC%20H3G%201P1!5e0!3m2!1sen!2sca!4v1632144001448!5m2!1sen!2sca" width="450" height="450" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
			</li>
			<li class="destinaton_flexbox">
				<h4>Hours Of Operation</h4>
				<table>
					<tr>
						<td>Monday - Friday</td>
						<td>9:00am - 6:00pm</td>
					</tr>
					<tr>
						<td>Saturday</td>
						<td>9:00am - 1:00pm</td>
					</tr>
					<tr>
						<td>Sunday</td>
						<td>CLOSED</td>
					</tr>
				</table>
				<h4>Address</h4>
				<address>
					<p>1234 Ste. Catherine Ouest</p>
					<p>Montreal, Quebec</p>
					<p>Canada</p>
					<p>H2K 3H2</p>
				</address>
				<h4>Contact Us</h4>
				<table>
					<tr>
						<td>Local</td>
						<td>514-444-5555</td>
					</tr>
					<tr>
						<td>International</td>
						<td>514-555-4444</td>
					</tr>
					<tr>
						<td>Email</td>
						<td>abc@example.com</td>
					</tr>
				</table>
			</li>
			<li class="destinaton_flexbox">
				<div class="form-div">
					<form action="#" method="get">
						Full Name<input type="text" id="fullname" name="fullname" placeholder="Your full name.." required>
						Email
						<input type="text" id="email" name="email" placeholder="Enter your email here" required>
						Message
						<textarea id="subject" name="subject" placeholder="Write something.." style="height:170px" required></textarea>
						<input type="button" value="Send" onclick="confirmContact()">
						<br/><br/>
						<div id="confirmMessage"></div>
					</form>
				</div>
			</li>
		</ul>
	</section>

	<div class="parallax-1"></div>

{% endblock %}

{% block scripts %}

<script>
        async function validateEmail() {
            var emailAddress = document.getElementById('email');
            var settings = {
                "url": "https://api.eva.pingutil.com/email?email=" + emailAddress.value,
                "method": "GET",
                "timeout": 0,
            };
            let verified = false;
            await $.ajax(settings).done(function(response) {
                if (response.data.deliverable === false) {
                    emailAddress.focus();
                } else
                    verified = true;
            });
            return verified;
        }

        async function confirmContact() {
            if (document.getElementById('fullname').value === "" || document.getElementById('subject').value === "" || document.getElementById('email').value === "") {
                //alert("You must enter your Name and a Message");
                document.getElementById('confirmMessage').innerHTML = "Please Fill out all fields.";
                return false
            }
            var realEmail = await validateEmail();
            console.log(realEmail);
            if (!realEmail) {
                document.getElementById('confirmMessage').innerHTML = "Invalid Email.";
                return false
            } else {
                document.getElementById('confirmMessage').innerHTML = "Thank you for contacting us.<br/> We will get back to you shortly!";
                document.getElementById('fullname').value = "";
                document.getElementById('email').value = "";
                document.getElementById('subject').value = "";
            }
        }
    </script>

{% endblock %}
